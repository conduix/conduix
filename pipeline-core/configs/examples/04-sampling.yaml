# 샘플링 예제: 대용량 데이터 처리

name: "high-volume-sampler"

input:
  type: kafka
  brokers: ["kafka:9092"]
  topics: ["clickstream"]
  group_id: "sampler"

steps:
  - name: parse
    transform: |
      root = this.parse_json()

  # 10% 샘플링
  - name: sample
    sample: 0.1

  - name: enrich
    transform: |
      root = this
      root.sampled = true

  - name: save
    save:
      type: elasticsearch
      url: "http://es:9200"
      index: "clickstream-sample"
